@using GajaTrack.Application.DTOs.DailyRhythmMap

<g transform="translate(@X, @Y)">
    @{
        var totalSleepMinutes = Summary.NapsMinutes + Summary.NightSleepMinutes;
        var totalH = (int)(totalSleepMinutes / 60);
        var totalM = (int)(totalSleepMinutes % 60);
        
        var napsH = (int)(Summary.NapsMinutes / 60);
        var napsM = (int)(Summary.NapsMinutes % 60);
        
        var nightH = (int)(Summary.NightSleepMinutes / 60);
        var nightM = (int)(Summary.NightSleepMinutes % 60);
        
        // Column Offsets
        const double Col2X = 85;
    }
    
    <!-- Column 1: Totals & Wakings -->
    <text x="0" y="16" font-size="10" fill="#333" font-weight="600">Total: @(totalH)h @(totalM)m</text>
    <text x="0" y="28" font-size="10" fill="#333" font-weight="500">Wakings: @Summary.NightWakingCount</text>

    <!-- Column 2: Breakdown -->
    <text x="@Col2X" y="16" font-size="10" fill="#555">Naps: @(napsH)h @(napsM)m</text>
    <text x="@Col2X" y="28" font-size="10" fill="#555">Night: @(nightH)h @(nightM)m</text>
</g>

@code {
    [Parameter] public DailyRhythmMapSummary Summary { get; set; } = default!;
    [Parameter] public double X { get; set; }
    [Parameter] public double Y { get; set; }
}
